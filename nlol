local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local camera = game.Workspace.CurrentCamera
local targetPlayer = nil
local camlockActive = false
local keybind = Enum.KeyCode.C  -- Change this keybind if needed

-- Import OrionLib
local OrionLib = require(game.ReplicatedStorage.OrionLib)

-- Create the Orion UI
local Window = OrionLib:MakeWindow({
    Name = "Camera Lock UI", 
    HidePremium = true,
    SaveConfig = true,
})

-- Create a button in the UI for mobile players to toggle camera lock
local CameraLockButton = Window:MakeButton({
    Name = "Toggle Camera Lock",
    Callback = function()
        if camlockActive then
            releaseCameraLock()
        else
            if targetPlayer then
                lockCameraToPlayer(targetPlayer)
            end
        end
    end
})

-- Function to lock the camera to a player
local function lockCameraToPlayer(target)
    if target and target:FindFirstChild("HumanoidRootPart") then
        camera.CameraType = Enum.CameraType.Scriptable
        camera.CFrame = CFrame.new(target.HumanoidRootPart.Position + Vector3.new(0, 5, 0))  -- Slightly above the target
        camlockActive = true
    end
end

-- Function to release camera lock
local function releaseCameraLock()
    camera.CameraType = Enum.CameraType.Custom
    camlockActive = false
end

-- Detecting player click
mouse.Button1Click:Connect(function()
    if not camlockActive then
        local target = mouse.Target
        if target and target.Parent and target.Parent:FindFirstChild("Humanoid") then
            lockCameraToPlayer(target.Parent)
        end
    end
end)

-- Keybind to toggle camera lock
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Keyboard then
        if input.KeyCode == keybind then
            if camlockActive then
                releaseCameraLock()
            else
                if targetPlayer then
                    lockCameraToPlayer(targetPlayer)
                end
            end
        end
    end
end)

-- Show the UI to the player
OrionLib:MakeNotification({
    Name = "Camera Lock Enabled",
    Content = "Press 'C' or click the button to toggle camera lock.",
    Image = "rbxassetid://6031094471",  -- Example notification image
    Time = 5
})
